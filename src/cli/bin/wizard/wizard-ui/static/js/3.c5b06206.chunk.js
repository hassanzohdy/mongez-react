(this.webpackJsonpmongez=this.webpackJsonpmongez||[]).push([[3],{497:function(e,t,a){"use strict";t.a=function(e){}},499:function(e,t,a){"use strict";a.d(t,"b",(function(){return Le})),a.d(t,"a",(function(){return Ge}));var n=a(0),r=a.n(n),o=r.a.createContext({tableInfo:{},options:null,service:null,updateRecords:null,records:null}),c=r.a.createContext({record:{},updateRecord:null});function l(){return r.a.useContext(o)}var i=a(20),u=a(184),s=a(195),m=a(15),d=a.n(m),f=a(2),p=a(9),b=a(907),g=a(908),v=a(174),E=a(909);function O(e){var t,a=e.isLoading,n=l(),o=n.records,i=n.options,u=n.updateRecords;return t=a?r.a.createElement(b.a,null,r.a.createElement(g.a,{align:"center",colSpan:i.table.columns.length},r.a.createElement(v.r,null,Object(p.d)("loading")))):d.a.array(o)&&d.a.empty(o)?r.a.createElement(b.a,null,r.a.createElement(g.a,{align:"center",colSpan:i.table.columns.length},Object(p.d)("noResults"))):o.map((function(e,t){e.columnsList||(e.columnsList=f.Obj.clone(i.table.columns));var a={record:e,rowIndex:t,updateRecord:function(e){u((function(a){return a[t]=e,Object(s.a)(a)}))}};return r.a.createElement(c.Provider,{key:e.id,value:a},r.a.createElement(b.a,null,e.columnsList.map((function(a,n){a.value=f.Obj.get(a,"value",f.Obj.get(e,a.key)),!a.value&&a.defaultValue&&(a.originalValue=a.value,a.value=a.defaultValue);var o=a.formatter?r.a.createElement(a.formatter,{options:i,record:e,column:a,rowIndex:t,columnIndex:n}):a.value,c=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,t)};return a.tooltip&&(c=function(t){var n=t.children;return r.a.createElement(v.t,{title:a.tooltip(e)},r.a.createElement("span",null,n))}),a.cell=r.a.createElement(g.a,{key:a.heading,align:"center"},r.a.createElement(c,null,o)),a.cell}))))})),r.a.createElement(E.a,null,t)}var j=a(653),P=Object(j.a)(g.a)({fontWeight:"bold"});function h(e){return r.a.createElement(P,e)}var x=a(910);function S(){var e=l().options.table.columns.map((function(e,t){return r.a.createElement(h,{align:"center",key:t},Object(p.d)(e.heading))}));return r.a.createElement(x.a,null,r.a.createElement(b.a,null,e))}var y=a(896),R=a(884),w=a(901),k=(a(815),a(892)),C=a(816),I=a.n(C),F=a(235),N=a(34),B=Object(j.a)(k.a)({}),q=Object(j.a)(v.i)({padding:"0.5rem 2.5rem",width:"100%"}),T={search:{component:u.o,defaultProps:{margin:"dense"}},date:{component:u.d,defaultProps:{margin:"dense"}},select:{component:u.k,defaultProps:{margin:"dense"}},autocomplete:{component:u.a,defaultProps:{margin:"none",classes:{root:"filter-autocomplete-root"},InputProps:{margin:"dense"}}}};function z(){var e=l().options,t=(e.table||{}).filter,a=N.c.queryString;t.forEach((function(e){!e.component&&e.type&&(e.component=T[e.type].component),e.inputProps=f.Obj.merge({},T[e.type].defaultProps||{},e,e.inputProps),delete e.inputProps.inputProps,delete e.inputProps.component,delete e.inputProps.col,delete e.inputProps.type}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,null,r.a.createElement(v.h,{array:t,render:function(e){return r.a.createElement(v.j,{xs:12,sm:e.col},r.a.createElement(e.component,Object.assign({},e.inputProps,{value:e.value||a.get(e.query||e.name)})))}}),r.a.createElement(v.j,{sm:2},r.a.createElement(u.l,{color:"primary",className:"filter-form-btn",variant:"contained"},Object(p.d)("table.filter")),!1!==e.resetFilterButton&&r.a.createElement(v.t,{title:Object(p.d)("table.reset")},r.a.createElement(B,{className:"filter-form-btn",onClick:function(){Object(N.f)(Object(N.b)())}},r.a.createElement(F.a,{icon:I.a,color:"orange"}))))))}var A=a(871),L=a(870),G=a(873),D=a(817),V=a.n(D),W=Object(A.a)((function(){return{root:{flexGrow:1},appBar:{color:"inherit",backgroundColor:"#FFF",marginBottom:"0.4rem"},title:{flexGrow:1}}}));function J(){var e=W(),t=(l().options.table||{}).filter,a=r.a.useState(!0),n=Object(i.a)(a,2),o=n[0],c=n[1];if(d.a.empty(t))return null;return r.a.createElement("div",{className:e.root},r.a.createElement(R.a,{className:e.appBar,position:"static"},r.a.createElement(w.a,null,r.a.createElement(G.a,{onClick:function(e){c(!o)}},r.a.createElement(V.a,null),r.a.createElement(L.a,{variant:"h6",className:e.title},Object(p.d)("table.filter")))),r.a.createElement(y.a,{in:o},r.a.createElement(z,null))))}var M=a(330),Q=a.n(M),H=a(818),K=a.n(H),U=Object(A.a)((function(){return{root:{flexGrow:1},appBar:{color:"inherit",backgroundColor:Q.a[100],marginBottom:"0.4rem"},title:{flexGrow:1}}}));function X(){var e=U(),t=l().options,a=Object(p.d)(t.table.heading),n=t.table.addButtons||[];return r.a.createElement("div",{className:e.root},r.a.createElement(R.a,{className:e.appBar,position:"static"},r.a.createElement(w.a,null,r.a.createElement(G.a,{edge:"start"},r.a.createElement(K.a,null)),r.a.createElement(L.a,{variant:"h6",className:e.title},a),n.map((function(e,t){return r.a.createElement(e,{key:t})})))))}var Y=a(876),Z=a(926);function $(){var e=l(),t=e.pagination,a=e.itemsPerPage,n=e.setItemsPerPage,o=e.setPageNumber,c=r.a.useState(t.currentPage-1),u=Object(i.a)(c,2),s=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{rowsPerPageOptions:[10,15,20,25,30,50,100],component:"div",count:t.totalRecords,rowsPerPage:a||t.itemsPerPage,page:s,labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return Object(p.d)("table.displayedRows",t,a,n)},labelRowsPerPage:Object(p.d)("table.labelRowsPerPage"),onChangePage:function(e,t){m(t),o(t+1)},onChangeRowsPerPage:function(e){n(e.target.value),m(0)}}))}var _=a(912),ee=a(911),te=a(61),ae=a(29),ne=a(879),re=a(433),oe=Object(A.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},lightBackdrop:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"#333"}}}));function ce(e){var t=e.open,a=e.onClick,n=e.className,o=e.position,c=void 0===o?"absolute":o,l=oe(),i=Object(ae.default)(l.backdrop,n),u={position:c};return r.a.createElement(ne.a,{style:u,className:i,open:t,onClick:a},r.a.createElement(re.a,{color:"inherit"}))}function le(e){var t=e.className,a=Object(te.a)(e,["className"]),n=oe(),o=Object(ae.default)(n.lightBackdrop,t);return r.a.createElement(ce,Object.assign({},a,{className:o}))}var ie={table:{displayedRows:"\u0639\u0631\u0636 %d-%d \u0645\u0646 %d",labelRowsPerPage:"\u0639\u0631\u0636",filter:"\u0641\u0644\u062a\u0631",reset:"\u0625\u0633\u062a\u0639\u0627\u062f\u0629"}},ue={table:{displayedRows:"%d-%d OF %d",labelRowsPerPage:"Show",filter:"Filter",reset:"Reset"}};p.a.extend("ar",ie),p.a.extend("en",ue);var se=Object(j.a)(Y.a)({position:"relative"});function me(e){var t=e.options,a=e.records,n=e.pagination,c=e.isLoading,l=r.a.useState(a),s=Object(i.a)(l,2),m=s[0],d=s[1],p=r.a.useState({}),b=Object(i.a)(p,2),g=b[0],E=b[1],j=r.a.useState(n),P=Object(i.a)(j,2),h=P[0],x=P[1],y=r.a.useState(c),R=Object(i.a)(y,2),w=R[0],k=R[1],C=r.a.useRef(),I=t.service;r.a.useEffect((function(){d(a)}),[a]),r.a.useEffect((function(){k(c)}),[c]),r.a.useEffect((function(){x(n)}),[n]);var F=function(e){var t=f.Obj.merge(g,e);E(t),setTimeout((function(){C.current.submit()}),0)},B={options:t,pagination:h,setPageNumber:function(e){F({page:e})},setPaginationInfo:x,setItemsPerPage:function(e){F({itemsPerPage:e,page:1})},itemsPerPage:g.itemsPerPage,loading:k,records:m,updateRecords:d,service:t.service};return r.a.createElement(o.Provider,{value:B},r.a.createElement(X,null),r.a.createElement(u.e,{ref:C,className:"filterForm",onSubmit:function(e,a){k(!0),!1!==t.updateQueryString&&Object(N.i)(a.toQueryString());var n=f.Obj.get(t,"requestMethods.list","list");I[n](a.toObject()).then((function(e){x(e.data.paginationInfo),d(e.data.records),a.submitting(!1),k(!1)}))}},r.a.createElement(J,null),r.a.createElement(se,null,r.a.createElement(le,{open:w}),r.a.createElement(ee.a,null,r.a.createElement(_.a,null,r.a.createElement(S,null),r.a.createElement(O,{isLoading:w}))),r.a.createElement(v.k,{condition:Boolean(h)},r.a.createElement(u.h,{name:"page",value:g.page||1}),r.a.createElement(u.h,{name:"itemsPerPage",value:g.itemsPerPage}),r.a.createElement($,null)))))}var de=a(199);function fe(e){var t=e.request,a=e.records,n=e.paginationInfo,o=e.options,c=e.mapResponse,l=e.defaultRequestParams,u=void 0===l?{}:l,s=Object(te.a)(e,["request","records","paginationInfo","options","mapResponse","defaultRequestParams"]),m=r.a.useState(!0),d=Object(i.a)(m,2),f=d[0],p=d[1],b=r.a.useState(u),g=Object(i.a)(b,2),v=g[0],E=g[1],O=r.a.useState({records:a||[],paginationInfo:n||{}}),j=Object(i.a)(O,2),P=j[0],h=j[1];r.a.useEffect((function(){t(v).then((function(e){var t=c(e),a=t.records,n=t.pagination;h({records:a,pagination:n}),p(!1)})).catch((function(e){console.log(e)}))}),[v]),r.a.useEffect((function(){h(Object(de.a)(Object(de.a)({},P),{},{paginationInfo:n}))}),[n]),r.a.useEffect((function(){h(Object(de.a)(Object(de.a)({},P),{},{records:a}))}),[a]);return r.a.createElement(me,Object.assign({options:o,isLoading:f,records:P.records,pagination:P.pagination,onChange:function(e){E(e),p(!0)}},s))}var pe=a(819),be=a.n(pe),ge=a(821),ve=a(7);function Ee(e){var t=e.action,a=e.formOptions,n=e.onClose,o=e.recordIndex,c=e.open,s=e.onSubmit,m=e.service,d=e.record,f=void 0===d?{}:d,b=r.a.useState({}),g=Object(i.a)(b,2),E=g[0],O=g[1],j=r.a.useState(null),P=Object(i.a)(j,2),h=P[0],x=P[1],S="edit"===t?"editItem":"addItem",y=l(),R=y.records,w=y.updateRecords,k=void 0===a.lazyForm?ve.a.get("form.lazyForm",!1):a.lazyForm;if(r.a.useEffect((function(){c&&k&&f.id&&!E.id&&(a.request||m.get.bind(m))(f.id).then((function(e){var t=e.data;O(t.record)}))}),[a,E,f,m,c]),!c)return null;var C,I=function(){var e=Object(ge.a)(be.a.mark((function e(n,r){var c,l,i,u,d,p,b,g,v,E,O;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(null),e.prev=1,c=n.target,"edit"!==t){e.next=12;break}return e.next=6,m.update(f.id,c);case 6:i=e.sent,u=i.data,d=u.record,l=d,e.next=18;break;case 12:return e.next=14,m.create(c);case 14:p=e.sent,b=p.data,g=b.record,l=g;case 18:s&&s(l,t),a.onSave&&a.onSave(l,f,o,w,R),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),r.submitting(!1),e.t0.response&&e.t0.response.data&&(v=e.t0.response.data,E=v.errors,O=v.error,x(O||E));case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t,a){return e.apply(this,arguments)}}();C=k?!E.id&&f.id?r.a.createElement("div",{style:{marginTop:"5rem",marginBottom:"5rem"}},r.a.createElement(v.o,null)):r.a.createElement(a.form,{index:o,record:E}):r.a.createElement(a.form,{index:o,record:f});return r.a.createElement(u.g,Object.assign({open:c,onSubmit:I,title:Object(p.d)(S,Object(p.d)(a.singleName)),onClose:function(){O({}),n()}},a.modalOptions||{}),r.a.createElement(u.f,{error:h}),C)}Object(j.a)(v.m)({color:"#FFF",backgroundColor:"#54545e",borderRadius:"5px",padding:"0.1rem 0.5rem",fontWeight:"bold"});a(340);Object(j.a)("div")({margin:"auto"});var Oe=a(913);a(823),a(822);a(50);var je=a(450),Pe=a.n(je),he={tooltip:Object(p.d)("add"),icon:{color:"primary",fontSize:"large"}};function xe(e){var t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],o=a[1],c=l(),u=c.service,m=c.options,p=c.updateRecords;if(!m.haveAccessTo("add"))return null;var b=e.formOptions||m.formOptions||{};b.modalOptions||(b.modalOptions=e.modalOptions||{});var g=b.defaultData,E=void 0===g?{published:!0}:g,O=f.Obj.merge(he,e.buttonOptions||{});return d.a.empty(b)?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{onClick:function(e){return o(!0)}},r.a.createElement(v.t,{title:O.tooltip},r.a.createElement(v.e,{icon:Pe.a,color:O.icon.color,fontSize:O.icon.fontSize}))),r.a.createElement(Ee,{onSubmit:function(e){p((function(t){return t.unshift(e),Object(s.a)(t)})),o(!1)},open:n,onClose:function(e){return o(!1)},service:u,action:"add",record:E,formOptions:b}))}var Se=a(824),ye=a.n(Se);var Re=a(825),we=function(e){var t=e.icon,a=e.navigateTo,n=void 0===a?null:a,o=e.permission,c=void 0===o?null:o,i=e.tooltip;return function(e){var a,o=e.record,u=e.column,s=l().options;if(c&&!s.haveAccessTo(c))return null;if(u.navigateTo)a=u.navigateTo(o,u);else if(n)a=n(o,u);else if(f.Obj.get(s,"navigation."+c)){a=f.Obj.get(s,"navigation."+c)(o,u,s)}else a=Object(N.a)(Object(N.b)(),o.id);return r.a.createElement(v.t,{title:Object(p.d)(i)},r.a.createElement(G.a,{component:v.m,to:a},r.a.createElement(t,null)))}}({icon:a.n(Re).a,tooltip:"view",permission:"view"}),ke=a(826),Ce=a.n(ke);var Ie=a(500),Fe=[],Ne=!0,Be={activate:function(){Ne=!0},deactivate:function(){Ne=!1},set:function(e){Fe=Fe.concat(e)},list:function(){return Fe},isGranted:function(e){return!1===Ne||Object(Ie.a)().can(e)}},qe=a(435),Te=Object(j.a)("h1")({fontWeight:"bold",textAlign:"center",fontSize:36});function ze(){return r.a.createElement(Te,{children:Object(p.d)("accessDenied")})}var Ae={add:!0,list:!0,edit:!0,view:!0,delete:!0};function Le(e){var t=e.role,a=e.permissions,n=void 0===a?{}:a,o=f.Obj.merge(Ae,n),c=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(d.a.callable(o[e])){var n=o[e],r=n(a);if(!1===r)return!1}return!t&&void 0===o[e]||o[e]&&Be.isGranted(t+"."+e)};return function(t){var a=t.props,n=r.a.useState(e),o=Object(i.a)(n,1)[0];if(Object(qe.f)(o.title||o.table.heading),!c("list"))return r.a.createElement(ze,null);o.props=a;return o.haveAccessTo||(o.haveAccessTo=c),o.table.addButtons||(o.table.addButtons=[xe]),r.a.createElement(fe,Object.assign({},a,{options:o,defaultRequestParams:N.c.queryString.all(),request:function(e){var t=f.Obj.get(o,"requestMethods.list","list");return o.service[t](e,o,a)},mapResponse:function(e){var t=e.data;return{records:t.records,pagination:t.paginationInfo}}}))}}var Ge={heading:"actions",formatter:function(e){var t=e.record,a=e.setRecord,n=e.column,o=e.columnIndex,c=e.rowIndex,l=n.buttons;return r.a.createElement(Oe.a,null,l.map((function(e,l){return r.a.createElement(e,{key:l,record:t,setRecord:a,rowIndex:c,columnIndex:o,column:n})})))},buttons:[we,function(e){var t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],o=a[1],u=l(),s=u.service,m=u.options,d=r.a.useContext(c),f=d.record,b=d.updateRecord;if(!m.haveAccessTo("edit",f))return null;var g=e.formOptions||m.formOptions||{};return g.modalOptions||(g.modalOptions=e.modalOptions||{}),r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{onClick:function(e){return o(!0)}},r.a.createElement(v.t,{title:Object(p.d)("edit")},r.a.createElement(ye.a,null))),r.a.createElement(Ee,{onSubmit:function(e){b(e),o(!1)},open:n,onClose:function(e){return o(!1)},service:s,action:"edit",record:f,formOptions:g}))},function(e){var t=e.record,a=e.rowIndex,n=r.a.useState(!1),o=Object(i.a)(n,2),c=o[0],u=o[1],m=l(),d=m.service,f=m.options,b=m.updateRecords;return f.haveAccessTo("delete",t)?r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{onClick:function(e){return u(!0)}},r.a.createElement(v.t,{title:Object(p.d)("remove")},r.a.createElement(Ce.a,null))),r.a.createElement(v.f,{open:c,onClose:function(e){return u(!1)},onConfirm:function(e){b((function(e){return e.splice(a,1),Object(s.a)(e)})),d.delete(t.id)},message:Object(p.d)("removeText")})):null}]}},815:function(e,t,a){}}]);